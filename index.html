<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel de Vendas - PRIME DISTRIBUIÇÃO</title>
    <link rel="icon" type="image/jpeg" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSnaaZ2WnZBJIxPRfabS4Ug78PKK6Gu3nbHlw&s">
    <!-- 1. ADICIONADO: Scripts necessários para o dashboard -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
    <!-- 3. ADICIONADO: Biblioteca para ler arquivos Excel (XLSX) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* CSS Variables for Theming */
        :root, html[data-theme="light"] {
            --bg-main: #F1F3F5;                     /* Cinza muito claro */
            --bg-content: #FFFFFF;                  /* Branco */
            --bg-header-gradient-from: #FD7E14;      /* Laranja refinado */
            --bg-header-gradient-to: #E8590C;        /* Laranja mais escuro para gradiente */
            --bg-menu: #FFFFFF;
            --header-span-text: #FFFFFF;
            --bg-menu-button-hover: #F8F9FA;
            --bg-modal-overlay: rgba(0,0,0,0.4);
            --bg-modal-content: #FFFFFF;             /* Sólido */
            --bg-input: #FFFFFF;                     /* Sólido */
            --bg-button: #E9ECEF;
            --bg-button-hover: #DEE2E6;
            --bg-button-active: #FD7E14;
            --bg-tooltip: #212529;
            --text-primary: #212529;
            --text-secondary: #495057;               /* CORRIGIDO: Cinza mais escuro para melhor contraste */
            --text-on-active-button: #ffffff;
            --text-on-dark-bg: #ffffff;
            --text-menu: #343A40;
            --text-menu-header: #D95A0B;
            --text-menu-section: #495057;
            --border-primary: #E9ECEF;               /* Borda sutil */
            --border-secondary: #F1F3F5;
            --border-menu-section: #E9ECEF;
            --scrollbar-track: #F1F3F5;
            --scrollbar-thumb: #CED4DA;
            --kpi-card-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        html[data-theme="dark"] {
            --bg-main: #222831;                      /* Cinza-azulado escuro */
            --bg-content: #393E46;                   /* Cinza-azulado médio */
            /* CORREÇÃO: Força o cabeçalho a ser laranja em ambos os temas */
            --bg-header-gradient-from: #FD7E14;
            --bg-header-gradient-to: #E8590C;
            --bg-menu: #393E46;
            --header-span-text: #FFD369;             /* Dourado/Âmbar */
            --bg-menu-button-hover: #4A5058;
            --bg-modal-overlay: rgba(0,0,0,0.6);
            --bg-modal-content: #4A5058;             /* CORRIGIDO: Mais claro que o --bg-content */
            --bg-input: #222831;                     /* Fundo escuro para contraste */
            --bg-button: #4A5058;
            --bg-button-hover: #5A6069;
            --bg-button-active: #FFD369;
            --bg-tooltip: #222831;
            --text-primary: #EEEEEE;                 /* Branco suave */
            --text-secondary: #ADB5BD;
            --text-on-active-button: #222831;        /* Texto escuro no botão ativo */
            --text-on-dark-bg: #EEEEEE;
            --text-menu: #EEEEEE;
            --text-menu-header: #FFD369;
            --text-menu-section: #ADB5BD;
            --border-primary: #ADB5BD;               /* CORRIGIDO: Borda mais clara para destaque */
            --border-secondary: #4A5058;
            --border-menu-section: #4A5058;
            --scrollbar-track: #222831;
            --scrollbar-thumb: #4A5058;
            --kpi-card-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        /* General Styles using Variables */
        body { font-family: 'Inter', sans-serif; background-color: var(--bg-main); color: var(--text-primary); transition: background-color 0.3s, color 0.3s; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--scrollbar-track); }
        ::-webkit-scrollbar-thumb { background: var(--scrollbar-thumb); border-radius: 10px; }
        ::-webkit-scrollbar-corner { background: var(--scrollbar-track); }
        .sticky-header th { position: sticky; top: 0; z-index: 10; background-color: var(--bg-content); border-bottom: 2px solid var(--border-secondary); }
        .hidden { display: none !important; }
        
        /* CORREÇÃO: Unifica a cor de fundo de todos os botões de filtro e dropdowns para corresponder aos <select> */
        .metric-btn, .fornecedor-btn, .comparison-toggle-btn, .group-btn, 
        #main-rede-group-container > div > button, #city-rede-group-container > div > button, #comparison-rede-group-container > div > button, #stock-rede-group-container > div > button,
        #vendedor-filter-btn, #tipo-venda-filter-btn, #city-vendedor-filter-btn, #comparison-vendedor-filter-btn, #comparison-supplier-filter-btn, #comparison-product-filter-btn, #stock-vendedor-filter-btn, #stock-supplier-filter-btn, #stock-product-filter-btn, #innovations-vendedor-filter-btn, #innovations-supplier-filter-btn, #innovations-product-filter-btn, #coverage-vendedor-filter-btn, #coverage-supplier-filter-btn, #coverage-product-filter-btn,
        #main-holiday-picker-btn, #comparison-holiday-picker-btn, #clear-filters-btn, #clear-city-filters-btn, #clear-weekly-filters-btn, #clear-comparison-filters-btn, #clear-stock-filters-btn, #clear-innovations-filters-btn, #clear-innovations-month-filters-btn, #clear-coverage-filters-btn { 
            background-color: var(--bg-input); 
            color: var(--text-secondary);
        }
        /* Adiciona borda aos botões que não a tinham, para consistência com os <select> */
        .fornecedor-btn, #clear-filters-btn, #clear-city-filters-btn, #clear-weekly-filters-btn, #clear-comparison-filters-btn, #clear-stock-filters-btn, #clear-innovations-filters-btn, #clear-innovations-month-filters-btn, #clear-coverage-filters-btn {
            border: 1px solid var(--border-primary);
        }
        
        /* Regra de HOVER unificada para todos os botões de filtro */
        .metric-btn:hover, .fornecedor-btn:hover, .comparison-toggle-btn:hover, .group-btn:hover, 
        #main-rede-group-container > div > button:hover, #city-rede-group-container > div > button:hover, #comparison-rede-group-container > div > button:hover, #stock-rede-group-container > div > button:hover,
        #vendedor-filter-btn:hover, #tipo-venda-filter-btn:hover, #city-vendedor-filter-btn:hover, #comparison-vendedor-filter-btn:hover, #comparison-supplier-filter-btn:hover, #comparison-product-filter-btn:hover, #stock-vendedor-filter-btn:hover, #stock-supplier-filter-btn:hover, #stock-product-filter-btn:hover, #innovations-vendedor-filter-btn:hover, #innovations-supplier-filter-btn:hover, #innovations-product-filter-btn:hover, #coverage-vendedor-filter-btn:hover, #coverage-supplier-filter-btn:hover, #coverage-product-filter-btn:hover,
        #main-holiday-picker-btn:hover, #comparison-holiday-picker-btn:hover, #clear-filters-btn:hover, #clear-city-filters-btn:hover, #clear-weekly-filters-btn:hover, #clear-comparison-filters-btn:hover, #clear-stock-filters-btn:hover, #clear-innovations-filters-btn:hover, #clear-innovations-month-filters-btn:hover, #clear-coverage-filters-btn:hover { 
            background-color: var(--bg-button-hover); 
        }
        .metric-btn.active, .fornecedor-btn.active, .comparison-toggle-btn.active, .group-btn.active, #main-rede-group-container > div > button.active, #city-rede-group-container > div > button.active, #comparison-rede-group-container > div > button.active, #stock-rede-group-container > div > button.active { background-color: var(--bg-button-active); color: var(--text-on-active-button); }
        
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: var(--bg-modal-overlay); display: flex; align-items: center; justify-content: center; z-index: 1000; }
        .modal-overlay > div { background-color: var(--bg-modal-content); border: 1px solid var(--border-primary); } /* Style modal content */

        .tooltip { position: relative; display: inline-block; cursor: pointer; }
        .tooltip .tooltip-text { visibility: hidden; width: auto; min-width: 80px; background-color: var(--bg-tooltip); color: var(--text-on-dark-bg); text-align: center; border-radius: 6px; padding: 5px 8px; position: absolute; z-index: 1001; bottom: 125%; left: 50%; transform: translateX(-50%); opacity: 0; transition: opacity 0.3s; pointer-events: none; white-space: nowrap; }
        .tooltip:hover .tooltip-text { visibility: visible; opacity: 1; }
        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: var(--scrollbar-track); }
        .custom-scrollbar::-webkit-scrollbar-thumb { background-color: var(--scrollbar-thumb); border-radius: 10px; }
        .kpi-card { 
            background-color: var(--bg-content); 
            border-radius: 0.75rem; /* rounded-xl */
            padding: 1rem; 
            text-align: left; 
            border: 1px solid var(--border-primary); 
            box-shadow: var(--kpi-card-shadow); 
            position: relative;
            overflow: hidden;
        }
        .kpi-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            width: 4px;
            background-color: var(--kpi-border-color, var(--bg-button-active));
        }
        .kpi-card h3 {
            color: var(--text-secondary);
            font-weight: 500;
            text-transform: uppercase;
            font-size: 0.75rem; /* text-xs */
            margin-left: 1rem; /* pl-4 considering the ::before element */
        }
        .kpi-card p:not(.kpi-subtext) {
            color: var(--text-primary);
            font-size: 2rem; /* text-4xl */
            font-weight: 700; /* font-bold */
            margin-top: 0.25rem;
            margin-bottom: 0.25rem;
            margin-left: 1rem;
        }
        .kpi-card .kpi-subtext {
            color: var(--text-secondary);
            font-size: 0.75rem; /* text-xs */
            margin-left: 1rem;
            margin-top: -0.25rem;
        }

        /* CORREÇÃO: Nova classe para dar destaque aos KPIs da tela de Comparativo */
        .comparison-kpi-card {
            background-color: var(--bg-content);
            border: 1px solid var(--border-primary);
            box-shadow: var(--kpi-card-shadow);
            border-radius: 0.75rem; /* rounded-xl */
            padding: 1rem; /* p-4 */
            text-align: center;
        }

        .stock-trend-btn.active { outline: 2px solid var(--bg-button-active); outline-offset: 2px; transform: scale(1.1); }
        
        /* CORREÇÃO: Classes de fundo personalizadas que faltavam */
        .bg-content { background-color: var(--bg-content); }
        .bg-input { background-color: var(--bg-input); }
        .bg-modal-content { background-color: var(--bg-modal-content); }

        select, input[type=text], input[type=number] { background-color: var(--bg-input); border: 1px solid var(--border-primary); color: var(--text-primary); }
        .header-gradient { background-image: linear-gradient(to right, var(--bg-header-gradient-from), var(--bg-header-gradient-to)); }
        h1, h2, h3, h4, h5, h6 { color: var(--text-primary); }
        p, span, div, label, th, td { color: var(--text-secondary); }
        h1 span, #side-menu h2 { color: var(--text-menu-header); }
        .text-white { color: var(--text-on-dark-bg); } /* Re-evaluate usage */

        tbody tr:hover { background-color: var(--bg-menu-button-hover); }
        
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
        input[type=number] { -moz-appearance: textfield; }

        /* Loader Style */
        #loader {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--bg-main);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.3s ease-out;
        }
        #loader-spinner {
            border: 4px solid #1d2347;
            border-top: 4px solid var(--bg-button-active);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Loader Spinner */
        #loader-spinner {
            border: 4px solid var(--border-secondary);
            border-top: 4px solid var(--bg-button-active);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Retractable Menu Styles */
        #side-menu { background-color: var(--bg-menu); color: var(--text-menu); }
        #side-menu.open { transform: translateX(0); }
        #menu-overlay.open { display: block; opacity: 1; }
        .nav-section h3 {
            color: var(--text-menu-section);
            font-weight: 700;
            margin-top: 1rem;
            margin-bottom: 0.5rem;
            padding-bottom: 0.25rem;
            border-bottom: 1px solid var(--border-menu-section);
        }
        .nav-btn {
            display: block;
            width: 100%;
            text-align: left;
            padding: 0.5rem 1rem; /* Reduced padding */
            border-radius: 0.375rem; /* rounded-md */
            color: var(--text-menu);
            transition: background-color 0.2s, color 0.2s;
            border-left: 3px solid transparent; /* For active state */
            font-weight: 500;
        }
        .nav-btn:hover { 
            background-color: var(--bg-menu-button-hover); 
            color: var(--text-primary);
        }
        .nav-btn.active {
            background-color: var(--bg-menu-button-hover);
            color: var(--text-primary);
            font-weight: 600;
            border-left-color: var(--bg-button-active);
        }

        /* Theme Switcher Styles */
        .theme-switcher {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem 1rem;
            border-top: 1px solid var(--border-menu-section);
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 34px;
            height: 20px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 20px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 12px;
            width: 12px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: var(--bg-button-active);
        }
        input:checked + .slider:before {
            transform: translateX(14px);
        }
    </style>
</head>
<body class="antialiased">

<!-- INÍCIO DO CÓDIGO PARA COPIAR -->

<!-- Tela de Login (quando deslogado) -->
<div id="tela-login" class="fixed inset-0 flex items-center justify-center z-[2000]">
    <div style="font-family: 'Inter', sans-serif; padding: 2.5rem; border-radius: 12px; box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1); max-width: 400px; width: 90%; background: var(--bg-content); text-align: center; border: 1px solid var(--border-primary);">
        <img src="https://i.imgur.com/Xv8Tb6d.png" alt="Logo da Empresa" style="width: 80px; height: 80px; margin: 0 auto 1.5rem; border-radius: 50%;">
        <h1 style="color: var(--text-primary); margin-top: 0; font-size: 1.8rem; font-weight: 700;">Acesso Restrito</h1>
        <p style="color: var(--text-secondary); line-height: 1.6;">Este é um sistema privado. Por favor, faça login para solicitar acesso.</p>
        <button id="login-button" style="display: flex; align-items: center; justify-content: center; gap: 0.75rem; background-color: var(--bg-input); color: var(--text-primary); border: 1px solid var(--border-primary); padding: 12px 24px; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: background-color 0.3s ease, border-color 0.3s ease; width: 100%; margin-top: 1rem;">
            <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="24" height="24" viewBox="0 0 48 48">
                <path fill="#FFC107" d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"></path>
                <path fill="#FF3D00" d="M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"></path>
                <path fill="#4CAF50" d="M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.222,0-9.657-3.356-11.303-8H2.89C6.166,35.905,14.441,44,24,44z"></path>
                <path fill="#1976D2" d="M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571l6.19,5.238C42.018,36.251,44,30.651,44,24C44,22.659,43.862,21.35,43.611,20.083z"></path>
            </svg>
            <span>Entrar com Google</span>
        </button>
    </div>
</div>


<!-- Tela de Carregamento -->
<div id="tela-loading" class="fixed inset-0 flex items-center justify-center z-[2000] hidden">
   <div style="font-family: 'Inter', sans-serif; padding: 2.5rem; border-radius: 12px; box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1); max-width: 400px; width: 90%; background: var(--bg-content); text-align: center; border: 1px solid var(--border-primary);">
        <h2 style="color: var(--text-primary); margin-top: 0; font-size: 1.5rem; font-weight: 600;">Carregando...</h2>
        <p style="color: var(--text-secondary); line-height: 1.6;">Verificando seu status de aprovação.</p>
        <button id="logout-button-loading" class="logout" style="background-color: #dc3545; color: white; border: none; padding: 12px 24px; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: background-color 0.3s ease; width: 100%; margin-top: 1rem;">
            Sair / Deslogar
        </button>
    </div>
</div>


<!-- Tela de Espera (Pendente) -->
<div id="tela-pendente" class="fixed inset-0 flex items-center justify-center z-[2000] hidden">
    <div style="font-family: 'Inter', sans-serif; padding: 2.5rem; border-radius: 12px; box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1); max-width: 400px; width: 90%; background: var(--bg-content); text-align: center; border: 1px solid var(--border-primary);">
        <h2 style="color: var(--text-primary); margin-top: 0; font-size: 1.5rem; font-weight: 600;">Sua conta está aguardando aprovação.</h2>
        <p style="color: var(--text-secondary); line-height: 1.6;">Por favor, aguarde o administrador liberar seu acesso. Você será notificado (ou pode tentar novamente mais tarde).</p>
        <button id="logout-button-pendente" class="logout" style="background-color: #dc3545; color: white; border: none; padding: 12px 24px; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: background-color 0.3s ease; width: 100%; margin-top: 1rem;">
            Sair
        </button>
    </div>
</div>

    <!-- Botão do Menu Hamburguer (Fixo no Canto) -->
    <button id="menu-toggle-btn" class="fixed top-4 left-4 z-[1100] p-2 rounded-md transition-colors" style="background-color: var(--bg-button); color: var(--text-secondary);">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
        </svg>
    </button>
    
    <!-- Overlay -->
    <div id="menu-overlay" class="fixed inset-0 bg-black/60 z-[1150] hidden transition-opacity duration-300"></div>

    <!-- Menu Lateral Retrátil -->
    <div id="side-menu" class="fixed top-0 left-0 h-full w-64 p-4 z-[1200] transform -translate-x-full transition-transform duration-300 ease-in-out custom-scrollbar overflow-y-auto flex flex-col">
        <h2 class="text-xl font-bold mb-6 text-center">PRIME</h2>
        <nav id="main-nav" class="flex-grow space-y-4">
             <!-- As seções e botões de navegação serão inseridos aqui -->
        </nav>
        <!-- Logout Button -->
        <div class="mt-auto pt-4 border-t border-menu-section">
            <button class="logout nav-btn w-full text-left">
                Sair / Deslogar
            </button>
        </div>
        <!-- Theme Switcher -->
        <div class="theme-switcher">
            <span class="text-sm font-medium" style="color: var(--text-menu-section);">Tema</span>
            <label class="switch">
                <input type="checkbox" id="theme-toggle-checkbox">
                <span class="slider"></span>
            </label>
        </div>
    </div>


    <!-- 5. ADICIONADO: Loader que será exibido enquanto os dados carregam -->
    <div id="loader" class="hidden">
        <div id="loader-spinner"></div>
        <p id="loader-text" class="text-slate-300 mt-4">Carregando dados do Supabase...</p>
    </div>

    <!-- 6. ADICIONADO: Todo o HTML do seu dashboard escuro original -->
    <div id="dashboard-view" class="hidden"> <!-- Começa escondido -->
        <div class="container mx-auto p-4 sm:p-6 lg:p-8">
            <header class="mb-8 p-6 header-gradient rounded-b-lg shadow-lg">
                <div class="flex flex-col sm:flex-row justify-between items-start gap-4">
                    <div class="text-center sm:text-left">
                        <h1 class="text-2xl font-bold text-white">PAINEL DE VENDAS - <span style="color: var(--header-span-text);">PRIME</span> DISTRIBUIÇÃO</h1>
                        <p id="generation-date" class="text-white mt-1">Dados atualizados em: ...</p>
                    </div>
                </div>
            </header>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="kpi-card" style="--kpi-border-color: #6366f1;">
                    <h3>Volume Tons</h3>
                    <p id="total-peso">0,0</p>
                </div>
                <div class="kpi-card" style="--kpi-border-color: #14b8a6;">
                    <h3>Faturamento R$</h3>
                    <p id="total-vendas">R$ 0,00</p>
                </div>
                <div class="kpi-card" style="--kpi-border-color: #22c55e;">
                    <h3>SKU/PDV</h3>
                    <p id="kpi-sku-pdv">0,0</p>
                </div>
                <div class="kpi-card" style="--kpi-border-color: #8b5cf6;">
                    <h3>Cobertura PDVs</h3>
                    <p id="kpi-positivacao">0,0%</p>
                    <p id="kpi-positivacao-percent" class="kpi-subtext">0 PDVs</p>
                </div>
            </div>
            
            <div class="mb-6 flex flex-col sm:flex-row justify-between items-center gap-4">
                <div id="fornecedor-toggle-container" class="w-full sm:w-auto rounded-lg p-1 flex justify-center sm:justify-start gap-2">
                    <button data-fornecedor="PEPSICO" class="fornecedor-btn font-bold py-2 px-4 rounded-lg flex-1 sm:flex-none">PEPSICO</button>
                    <button data-fornecedor="MULTIMARCAS" class="fornecedor-btn font-bold py-2 px-4 rounded-lg flex-1 sm:flex-none">MULTIMARCAS</button>
                </div>
            </div>
            
            <div id="main-filters" class="mb-8 p-4 bg-content rounded-xl shadow-sm border border-primary">
                <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4 items-end">
                    <div id="main-rede-filter-wrapper" class="relative">
                        <label class="block mb-2 text-sm font-medium text-secondary">Rede</label>
                        <div id="main-rede-group-container" class="inline-flex rounded-md shadow-sm" role="group">
                            <button type="button" data-group="" class="group-btn active py-2 px-4 text-sm font-medium border rounded-l-lg">Todos</button>
                            <button type="button" data-group="com_rede" id="main-com-rede-btn" class="group-btn py-2 px-4 text-sm font-medium border-t border-b flex items-center gap-2">
                                <span id="main-com-rede-btn-text">Com Rede</span>
                                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                            </button>
                            <button type="button" data-group="sem_rede" class="group-btn py-2 px-4 text-sm font-medium border rounded-r-lg">Sem Rede</button>
                        </div>
                        <div id="main-rede-filter-dropdown" class="hidden absolute z-20 w-56 mt-1 top-full left-0 bg-modal-content border border-primary rounded-lg shadow-lg max-h-60 overflow-y-auto custom-scrollbar text-left"></div>
                    </div>
                    <div><label class="block mb-2 text-sm font-medium text-secondary">Supervisor</label><select id="supervisor-filter" class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5"><option value="">Todos</option></select></div>
                    <div class="relative"><label class="block mb-2 text-sm font-medium text-secondary">Vendedor</label><button id="vendedor-filter-btn" class="w-full border text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-teal-500"><span id="vendedor-filter-text">Todos Vendedores</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button><div id="vendedor-filter-dropdown" class="hidden absolute z-20 w-full mt-1 bg-modal-content border border-primary rounded-lg shadow-lg max-h-60 overflow-y-auto custom-scrollbar"></div></div>
                    <div class="relative"><label class="block mb-2 text-sm font-medium text-secondary">Tipo Venda</label><button id="tipo-venda-filter-btn" class="w-full border text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-teal-500"><span id="tipo-venda-filter-text">Todos os Tipos</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button><div id="tipo-venda-filter-dropdown" class="hidden absolute z-20 w-full mt-1 bg-modal-content border border-primary rounded-lg shadow-lg max-h-60 overflow-y-auto custom-scrollbar"></div></div>
                    <div><label class="block mb-2 text-sm font-medium text-secondary">Fornecedor</label><select id="fornecedor-filter" class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5"><option value="">Todos</option></select></div>
                    <div><label class="block mb-2 text-sm font-medium text-secondary">Cód. Cliente</label><input type="text" id="codcli-filter" placeholder="Digite o código..." class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5"></div>
                    <div><label class="block mb-2 text-sm font-medium text-secondary">Posição</label><select id="posicao-filter" class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5"><option value="">Todas</option><option value="L">Liberado</option><option value="M">Montado</option><option value="F">Faturado</option></select></div>
                    <div class="md:col-start-6"><button id="clear-filters-btn" class="w-full font-bold py-2.5 px-4 rounded-lg">Limpar Filtros</button></div>
                </div>
            </div>

            <!-- A estrutura aninhada de main/chartView foi removida para consistência -->
            <div class="mb-6 p-4 rounded-xl border border-primary shadow-sm bg-content">
                <div class="flex justify-between items-center mb-4">
                    <div class="w-1/3">
                        <label class="block mb-2 text-sm font-medium text-secondary">Feriados do Mês</label>
                        <button id="main-holiday-picker-btn" class="w-full border text-sm rounded-lg p-2.5 text-left focus:outline-none focus:ring-2 focus:ring-teal-500">Selecionar Feriados</button>
                    </div>
                    <div class="w-1/3 text-center">
                        <h2 class="text-lg font-semibold">Tendência de Faturamento</h2>
                    </div>
                    <div class="w-1/3"></div>
                </div>
                <div id="trendChartContainer" class="relative h-80"></div>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="p-4 rounded-xl border border-primary shadow-sm bg-content"><h2 id="sales-by-person-title" class="text-lg font-semibold mb-4 text-center">Vendas por Supervisor</h2><div id="salesByPersonChartContainer" class="relative h-80"></div></div>
                <div class="p-4 rounded-xl border border-primary shadow-sm bg-content"><h2 id="faturamentoPorFornecedorTitle" class="text-lg font-semibold mb-4 text-center">Faturamento por Categoria</h2><div id="faturamentoPorFornecedorChartContainer" class="relative h-80"></div></div>
            </div>
            <div class="mt-6 p-4 rounded-xl border border-primary shadow-sm bg-content">
                <div class="flex justify-between items-center mb-4"><h2 class="text-lg font-semibold">Vendas por Produto</h2>
                    <div class="rounded-lg p-1 flex">
                        <button id="faturamentoBtn" class="metric-btn active px-3 py-1 text-sm rounded-md">Faturamento</button>
                        <button id="pesoBtn" class="metric-btn px-3 py-1 text-sm rounded-md">Peso Kg</button>
                    </div>
                </div>
                <div id="salesByProductBarChartContainer" class="relative h-80"></div>
            </div>
        </div>
    </div>

    <!-- Ecrã Pedidos Detalhados -->
    <div id="orders-view" class="hidden container mx-auto p-4 sm:p-6 lg:p-8">
        <header class="mb-8 p-6 header-gradient rounded-b-lg shadow-lg">
            <div class="flex flex-col sm:flex-row justify-between items-start gap-4">
                <div class="text-center sm:text-left">
                    <h1 class="text-2xl font-bold text-white">PEDIDOS DETALHADOS - <span style="color: var(--header-span-text);">PRIME</span> DISTRIBUIÇÃO</h1>
                    <p id="orders-generation-date" class="text-white mt-1">Dados atualizados em: ...</p>
                </div>
            </div>
        </header>

        <!-- Filtros Duplicados para a View de Pedidos -->
        <div id="orders-filters" class="mb-8 p-4 bg-content rounded-xl shadow-sm border border-primary">
            <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4 items-end">
                <div id="orders-rede-filter-wrapper" class="relative">
                    <label class="block mb-2 text-sm font-medium text-secondary">Rede</label>
                    <div id="orders-rede-group-container" class="inline-flex rounded-md shadow-sm" role="group">
                        <button type="button" data-group="" class="group-btn active py-2 px-4 text-sm font-medium border rounded-l-lg">Todos</button>
                        <button type="button" data-group="com_rede" id="orders-com-rede-btn" class="group-btn py-2 px-4 text-sm font-medium border-t border-b flex items-center gap-2">
                            <span id="orders-com-rede-btn-text">Com Rede</span>
                            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <button type="button" data-group="sem_rede" class="group-btn py-2 px-4 text-sm font-medium border rounded-r-lg">Sem Rede</button>
                    </div>
                    <div id="orders-rede-filter-dropdown" class="hidden absolute z-20 w-56 mt-1 top-full left-0 bg-modal-content border border-primary rounded-lg shadow-lg max-h-60 overflow-y-auto custom-scrollbar text-left"></div>
                </div>
                <div><label class="block mb-2 text-sm font-medium text-secondary">Supervisor</label><select id="orders-supervisor-filter" class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5"><option value="">Todos</option></select></div>
                <div class="relative"><label class="block mb-2 text-sm font-medium text-secondary">Vendedor</label><button id="orders-vendedor-filter-btn" class="w-full border text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-teal-500"><span id="orders-vendedor-filter-text">Todos Vendedores</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button><div id="orders-vendedor-filter-dropdown" class="hidden absolute z-20 w-full mt-1 bg-modal-content border border-primary rounded-lg shadow-lg max-h-60 overflow-y-auto custom-scrollbar"></div></div>
                <div class="relative"><label class="block mb-2 text-sm font-medium text-secondary">Tipo Venda</label><button id="orders-tipo-venda-filter-btn" class="w-full border text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-teal-500"><span id="orders-tipo-venda-filter-text">Todos os Tipos</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button><div id="orders-tipo-venda-filter-dropdown" class="hidden absolute z-20 w-full mt-1 bg-modal-content border border-primary rounded-lg shadow-lg max-h-60 overflow-y-auto custom-scrollbar"></div></div>
                <div><label class="block mb-2 text-sm font-medium text-secondary">Fornecedor</label><select id="orders-fornecedor-filter" class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5"><option value="">Todos</option></select></div>
                <div><label class="block mb-2 text-sm font-medium text-secondary">Cód. Cliente</label><input type="text" id="orders-codcli-filter" placeholder="Digite o código..." class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5"></div>
                <div><label class="block mb-2 text-sm font-medium text-secondary">Posição</label><select id="orders-posicao-filter" class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5"><option value="">Todas</option><option value="L">Liberado</option><option value="M">Montado</option><option value="F">Faturado</option></select></div>
                <div class="md:col-start-6"><button id="clear-orders-filters-btn" class="w-full font-bold py-2.5 px-4 rounded-lg">Limpar Filtros</button></div>
            </div>
        </div>

        <main id="orders-app-container">
            <div class="overflow-x-auto bg-content rounded-xl border border-primary shadow-sm" style="max-height: 60vh;">
                <table class="min-w-full text-sm text-left">
                    <thead class="text-xs uppercase sticky-header">
                        <tr><th class="px-4 py-3">Nº Pedido</th><th class="px-4 py-3">Cód. Cliente</th><th class="px-4 py-3">Vendedor</th><th class="px-4 py-3">Fornecedor</th><th class="px-4 py-3">Data Pedido</th><th class="px-4 py-3">Data Fat.</th><th class="px-4 py-3 text-right">Peso Total</th><th class="px-4 py-3 text-right">Faturamento Total</th><th class="px-4 py-3 text-center">Posição</th></tr>
                    </thead>
                    <tbody id="orders-table-body" class="divide-y divide-border-secondary"></tbody>
                </table>
            </div>
            <div id="orders-pagination-controls" class="hidden mt-4 flex justify-between items-center">
                <button id="orders-prev-page-btn" class="border font-bold py-2 px-4 rounded-lg disabled:opacity-50" disabled>Anterior</button>
                <span id="orders-page-info-text">Página 1 de 1</span>
                <button id="orders-next-page-btn" class="border font-bold py-2 px-4 rounded-lg disabled:opacity-50" disabled>Próxima</button>
            </div>
        </main>
    </div>
    
    <!-- Ecrã de Cidades -->
    <div id="city-view" class="hidden container mx-auto p-4 sm:p-6 lg:p-8">
        <header class="mb-8 p-6 header-gradient rounded-b-lg shadow-lg">
            <div class="flex justify-between items-center"><div><h1 class="text-2xl font-bold text-white">PAINEL DE VENDAS - <span style="color: var(--header-span-text);">PRIME</span> DISTRIBUIÇÃO</h1><p class="text-lg text-white -mt-1">Análise de Vendas por Cidade</p></div><button id="back-to-main-from-city-btn" class="bg-white/20 hover:bg-white/30 text-white font-bold py-2 px-4 rounded-lg">Voltar ao Dashboard</button></div>
        </header>
        <div id="city-view-loader" class="text-center p-16"><p class="text-lg">Carregando dados...</p></div>
        <div id="city-view-content" class="hidden">
            <div class="mb-6 p-4 bg-content rounded-xl shadow-sm border border-primary">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 items-end">
                    <div id="city-rede-filter-wrapper" class="relative">
                        <label class="block mb-2 text-sm font-medium">Rede</label>
                        <div id="city-rede-group-container" class="inline-flex rounded-md shadow-sm" role="group">
                            <button type="button" data-group="" class="group-btn active py-2 px-4 text-sm font-medium border rounded-l-lg">Todos</button>
                            <div class="relative">
                                <button type="button" data-group="com_rede" id="city-com-rede-btn" class="group-btn py-2 px-4 text-sm font-medium border-t border-b flex items-center justify-center gap-2">
                                    <span id="city-com-rede-btn-text">Com Rede</span>
                                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg>
                                </button>
                                <div id="city-rede-filter-dropdown" class="hidden absolute z-20 w-56 mt-1 top-full left-0 bg-modal-content border border-primary rounded-lg shadow-lg max-h-60 overflow-y-auto custom-scrollbar text-left"></div>
                            </div>
                            <button type="button" data-group="sem_rede" class="group-btn py-2 px-4 text-sm font-medium border rounded-r-lg">Sem Rede</button>
                        </div>
                    </div>
                    <div><label class="block mb-2 text-sm font-medium">Supervisor</label><select id="city-supervisor-filter" class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5"><option value="">Todos</option></select></div>
                    <div class="relative"><label class="block mb-2 text-sm font-medium">Vendedor</label><button id="city-vendedor-filter-btn" class="w-full border text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-teal-500"><span id="city-vendedor-filter-text">Todos</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button><div id="city-vendedor-filter-dropdown" class="hidden absolute z-20 w-full mt-1 bg-modal-content border border-primary rounded-lg shadow-lg max-h-60 overflow-y-auto custom-scrollbar"></div></div>
                    <div class="relative"><label for="city-name-filter" class="block mb-2 text-sm font-medium">Cidade</label><input type="text" id="city-name-filter" placeholder="Digite a cidade..." class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5" autocomplete="off"><div id="city-suggestions" class="absolute z-10 w-full bg-modal-content border border-primary rounded-lg mt-1 hidden max-h-48 overflow-y-auto custom-scrollbar"></div></div>
                    <div><label for="city-codcli-filter" class="block mb-2 text-sm font-medium">Cód. Cliente</label><input type="text" id="city-codcli-filter" placeholder="Digite o código..." class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5"></div>
                </div>
                <div class="mt-4 flex justify-center">
                    <button id="clear-city-filters-btn" class="font-bold py-2 px-4 rounded-lg">Limpar Filtros</button>
                </div>
            </div>
            <div class="grid grid-cols-1 xl:grid-cols-2 gap-6">
                <div class="p-4 rounded-xl border border-primary shadow-sm bg-content">
                    <div class="flex justify-between items-center mb-4"><div class="w-1/4"><span class="text-xl font-bold text-indigo-400">Top 10</span></div><div class="w-1/2 text-center"><h2 id="city-chart-title" class="text-lg font-semibold"></h2></div><div class="w-1/4 text-right"><p class="text-sm">Total Vendido</p><p id="total-faturamento-cidade" class="text-xl font-bold text-green-400">R$ 0,00</p></div></div><div id="salesByClientInCityChartContainer" class="relative h-96"></div>
                </div>
                <div class="p-4 rounded-xl border border-primary shadow-sm bg-content"><h2 class="text-lg font-semibold mb-4 text-center">Status dos Clientes</h2><div id="customerStatusChartContainer" class="relative h-96 flex items-center justify-center"></div></div>
            </div>
            <div class="p-4 rounded-xl mt-6 border border-primary shadow-sm bg-content"><div class="flex justify-between items-center mb-4 px-4"><h3 class="text-lg font-semibold">Clientes Ativos no Mês</h3><button id="export-active-pdf-btn" class="bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg text-sm">Exportar Relatório</button></div><div class="overflow-x-auto custom-scrollbar" style="max-height: 40vh;"><table class="min-w-full text-sm text-left"><thead class="text-xs uppercase sticky-header"><tr><th class="px-4 py-3">Código</th><th class="px-4 py-3">Nome Fantasia</th><th class="px-4 py-3 text-right">Faturamento</th><th class="px-4 py-3">Cidade</th><th class="px-4 py-3">Bairro</th><th class="px-4 py-3">RCA</th></tr></thead><tbody id="city-active-detail-table-body" class="divide-y divide-border-secondary"></tbody></table></div></div>
            <div class="p-4 rounded-xl mt-6 border border-primary shadow-sm bg-content"><div class="flex justify-between items-center mb-4 px-4"><h3 class="text-lg font-semibold">Clientes S/ Vendas no Mês</h3><button id="export-inactive-pdf-btn" class="bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg text-sm">Exportar Relatório</button></div><div class="overflow-x-auto custom-scrollbar" style="max-height: 40vh;"><table class="min-w-full text-sm text-left"><thead class="text-xs uppercase sticky-header"><tr><th class="px-4 py-3">Código</th><th class="px-4 py-3">Nome Fantasia</th><th class="px-4 py-3">Cidade</th><th class="px-4 py-3">Bairro</th><th class="px-4 py-3 text-center">Última Compra</th><th class="px-4 py-3">RCA</th></tr></thead><tbody id="city-inactive-detail-table-body" class="divide-y divide-border-secondary"></tbody></table></div></div>
        </div>
    </div>
    
    <!-- Ecrã Semanal -->
    <div id="weekly-view" class="hidden container mx-auto p-4 sm:p-6 lg:p-8">
        <header class="mb-8 p-6 header-gradient rounded-b-lg shadow-lg">
            <div class="flex justify-between items-center"><div><h1 class="text-2xl font-bold text-white">PAINEL DE VENDAS - <span style="color: var(--header-span-text);">PRIME</span> DISTRIBUIÇÃO</h1><p class="text-lg text-white -mt-1">Acompanhamento Semanal</p></div><button id="back-to-main-from-weekly-btn" class="bg-white/20 hover:bg-white/30 text-white font-bold py-2 px-4 rounded-lg">Voltar ao Dashboard</button></div>
        </header>
        <div class="mb-6 p-4 bg-content rounded-xl shadow-sm border border-primary">
            <div class="flex flex-col sm:flex-row justify-between items-center gap-4">
                <div id="weekly-fornecedor-toggle-container" class="w-full sm:w-auto rounded-lg p-1 flex justify-center sm:justify-start gap-2"><button data-fornecedor="PEPSICO" class="fornecedor-btn font-bold py-2 px-4 rounded-lg flex-1 sm:flex-none">PEPSICO</button><button data-fornecedor="MULTIMARCAS" class="fornecedor-btn font-bold py-2 px-4 rounded-lg flex-1 sm:flex-none">MULTIMARCAS</button></div>
                <button id="clear-weekly-filters-btn" class="font-bold py-2 px-4 rounded-lg">Limpar Filtros</button>
            </div>
            <div class="mt-4"><label class="block text-sm font-medium mb-2">Filtrar Supervisores</label><div id="weekly-supervisor-filter" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4"></div></div>
        </div>
        <div class="grid grid-cols-1 gap-6">
            <div class="p-4 rounded-xl border border-primary shadow-sm bg-content">
                <div class="flex justify-between items-center mb-4"><h2 class="text-lg font-semibold text-center">Faturamento Mensal por Dia da Semana</h2><div class="text-right"><p class="text-sm">Total do Mês</p><p id="total-mes-semanal" class="text-xl font-bold text-green-400">R$ 0,00</p></div></div><div id="weeklySalesChartContainer" class="relative h-96"></div>
                <div class="mt-6 border-t border-primary pt-4"><h3 class="text-md font-semibold mb-3 text-center">Resumo de Faturamento Semanal</h3><div class="overflow-x-auto"><table class="min-w-full text-sm text-left"><thead class="text-xs uppercase"><tr><th class="px-4 py-2 rounded-l-lg">Semana</th><th class="px-4 py-2 text-right rounded-r-lg">Faturamento Total</th></tr></thead><tbody id="weekly-summary-table-body" class="divide-y divide-border-secondary"></tbody></table></div></div>
            </div>
            <div class="grid grid-cols-1 gap-6"><div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><div class="p-4 rounded-xl border border-primary shadow-sm bg-content"><h2 class="text-lg font-semibold mb-4 text-center">Ranking de Positivação</h2><div id="positivacaoChartContainer" class="relative h-80"></div></div><div class="p-4 rounded-xl border border-primary shadow-sm bg-content"><h2 class="text-lg font-semibold mb-4 text-center">Ranking de Mix de Produtos (Por PDV)</h2><div id="mixChartContainer" class="relative h-80"></div></div></div><div class="p-4 rounded-xl border border-primary shadow-sm bg-content"><h2 class="text-lg font-semibold mb-4 text-center">Top 10 Vendedores (Faturamento)</h2><div id="topSellersChartContainer" class="relative h-80"></div></div></div>
        </div>
    </div>
    
    <!-- Ecrã Comparativo -->
    <div id="comparison-view" class="hidden container mx-auto p-4 sm:p-6 lg:p-8">
        <header class="mb-8 p-6 header-gradient rounded-b-lg shadow-lg">
            <div class="flex justify-between items-center"><div><h1 class="text-2xl font-bold text-white">PAINEL DE VENDAS - <span style="color: var(--header-span-text);">PRIME</span> DISTRIBUIÇÃO</h1><p class="text-lg text-white -mt-1">Comparativo entre Meses</p></div><button id="back-to-main-from-comparison-btn" class="bg-white/20 hover:bg-white/30 text-white font-bold py-2 px-4 rounded-lg">Voltar ao Dashboard</button></div>
        </header>
        <div class="mb-6 p-4 bg-content rounded-xl shadow-sm border border-primary">
            <div id="comparison-rede-filter-wrapper" class="flex flex-col sm:flex-row justify-between items-center gap-4 mb-4">
                <div class="relative w-full sm:w-1/2">
                    <label class="block mb-2 text-sm font-medium">Rede</label>
                    <div id="comparison-rede-group-container" class="inline-flex rounded-md shadow-sm w-full" role="group">
                        <button type="button" data-group="" class="group-btn active py-2 px-4 text-sm font-medium border rounded-l-lg flex-1">Todos</button>
                        <button type="button" data-group="com_rede" id="comparison-com-rede-btn" class="group-btn py-2 px-4 text-sm font-medium border-t border-b flex items-center justify-center gap-2 flex-1">
                            <span id="comparison-com-rede-btn-text">Com Rede</span>
                            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <button type="button" data-group="sem_rede" class="group-btn py-2 px-4 text-sm font-medium border rounded-r-lg flex-1">Sem Rede</button>
                    </div>
                    <div id="comparison-rede-filter-dropdown" class="hidden absolute z-20 w-full mt-1 top-full left-0 bg-modal-content border border-primary rounded-lg shadow-lg max-h-60 overflow-y-auto custom-scrollbar text-left"></div>
                </div>
                <div class="w-full sm:w-1/2">
                    <label class="block mb-2 text-sm font-medium">Pasta</label>
                    <div id="comparison-fornecedor-toggle-container" class="w-full rounded-lg p-1 flex justify-center gap-2">
                        <button data-fornecedor="PEPSICO" class="fornecedor-btn font-bold py-2 px-4 rounded-lg flex-1">PEPSICO</button>
                        <button data-fornecedor="MULTIMARCAS" class="fornecedor-btn font-bold py-2 px-4 rounded-lg flex-1">MULTIMARCAS</button>
                    </div>
                </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4">
                <div><label for="comparison-supervisor-filter" class="block mb-2 text-sm font-medium">Supervisor</label><select id="comparison-supervisor-filter" class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5"><option value="">Todos</option></select></div>
                <div class="relative"><label class="block mb-2 text-sm font-medium">Vendedor</label><button id="comparison-vendedor-filter-btn" class="w-full border text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-teal-500"><span id="comparison-vendedor-filter-text">Todos</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button><div id="comparison-vendedor-filter-dropdown" class="hidden absolute z-20 w-full mt-1 bg-modal-content border border-primary rounded-lg shadow-lg max-h-60 overflow-y-auto custom-scrollbar"></div></div>
                <div class="relative"><label class="block mb-2 text-sm font-medium">Fornecedor</label><button id="comparison-supplier-filter-btn" class="w-full border text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-teal-500"><span id="comparison-supplier-filter-text">Todos Fornecedores</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button><div id="comparison-supplier-filter-dropdown" class="hidden absolute z-20 w-full mt-1 bg-modal-content border border-primary rounded-lg shadow-lg max-h-60 overflow-y-auto custom-scrollbar"></div></div>
                <div class="relative"><label for="comparison-city-filter" class="block mb-2 text-sm font-medium">Cidade</label><input type="text" id="comparison-city-filter" placeholder="Digite a cidade..." class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5" autocomplete="off"><div id="comparison-city-suggestions" class="absolute z-10 w-full bg-modal-content border border-primary rounded-lg mt-1 hidden max-h-48 overflow-y-auto custom-scrollbar"></div></div>
            </div>
            <div class="grid grid-cols-1 mt-4">
                <div class="relative">
                    <label class="block mb-2 text-sm font-medium">Filtrar por Produto</label>
                    <button id="comparison-product-filter-btn" class="w-full border text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-teal-500"><span id="comparison-product-filter-text">Todos os Produtos</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>
                    <div id="comparison-product-filter-dropdown" class="hidden absolute z-20 w-full mt-1 bg-modal-content border border-primary rounded-lg shadow-lg">
                        <div class="p-2 border-b border-primary"><input type="text" id="comparison-product-search-input" placeholder="Buscar produto..." class="bg-input text-xs rounded-lg block w-full p-2 border border-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-teal-500"></div>
                        <div id="comparison-product-list" class="max-h-60 overflow-y-auto custom-scrollbar"></div>
                    </div>
                </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 items-end border-t border-primary pt-4 mt-4">
                <div><label class="block mb-2 text-sm font-medium">Filial</label><select id="comparison-filial-filter" class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5"><option value="ambas" selected>Ambas</option><option value="05">Filial 05</option><option value="08">Filial 08</option></select></div>
                <div class="flex items-end"><div class="w-full"><label class="block mb-2 text-sm font-medium">Feriados do Mês</label><button id="comparison-holiday-picker-btn" class="w-full border text-sm rounded-lg p-2.5 text-left focus:outline-none focus:ring-2 focus:ring-teal-500">Selecionar Feriados</button></div></div>
                <button id="comparison-tendency-toggle" class="w-full bg-purple-600 hover:bg-purple-500 text-white font-bold py-2.5 px-4 rounded-lg">Calcular Tendência</button>
                <button id="clear-comparison-filters-btn" class="w-full font-bold py-2.5 px-4 rounded-lg">Limpar Filtros</button>
            </div>
        </div>
        <div id="comparison-kpi-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-6 mb-6">
        </div>
        <div class="grid grid-cols-1 gap-6">
            <div class="p-4 rounded-xl border border-primary shadow-sm bg-content">
                <div class="flex justify-center items-center mb-4 relative">
                    <h2 id="comparison-chart-title" class="text-lg font-semibold text-center">Comparativo de Faturamento Semanal</h2>
                    <div class="absolute right-0 top-0 bottom-0 flex items-center">
                        <div id="comparison-chart-toggle" class="flex rounded-lg p-1">
                            <button id="toggle-weekly-btn" class="comparison-toggle-btn active px-3 py-1 text-sm rounded-md">Semanal</button>
                            <button id="toggle-monthly-btn" class="comparison-toggle-btn px-3 py-1 text-sm rounded-md">Mensal</button>
                        </div>
                    </div>
                </div>
                <div id="weeklyComparisonChartContainer" class="relative h-96"></div>
                <div id="monthlyComparisonChartContainer" class="relative h-96 hidden"></div>
            </div>
            <div class="p-4 rounded-xl border border-primary shadow-sm bg-content">
                <h2 class="text-lg font-semibold text-center mb-4">Faturamento por Dia da Semana</h2>
                <div id="dailyWeeklyComparisonChartContainer" class="relative h-96"></div>
            </div>
            <div class="p-4 rounded-xl border border-primary shadow-sm bg-content"><h2 class="text-lg font-semibold text-center mb-4">Variação de Faturamento por Supervisor</h2><div class="overflow-x-auto custom-scrollbar" style="max-height: 40vh;"><table class="min-w-full text-sm text-left"><thead class="text-xs uppercase sticky-header"><tr><th class="px-4 py-3">Supervisor</th><th class="px-4 py-3 text-right">Média Trim.</th><th class="px-4 py-3 text-right">Fat. Mês Atual</th><th class="px-4 py-3 text-right">Variação</th></tr></thead><tbody id="supervisorComparisonTableBody" class="divide-y divide-border-secondary"></tbody></table></div></div>
        </div>
    </div>
    
    <!-- Ecrã Estoque -->
    <div id="stock-view" class="hidden container mx-auto p-4 sm:p-6 lg:p-8">
        <header class="mb-8 p-6 header-gradient rounded-b-lg shadow-lg">
            <div class="flex justify-between items-center"><div><h1 class="text-2xl font-bold text-white">PAINEL DE VENDAS - <span style="color: var(--header-span-text);">PRIME</span> DISTRIBUIÇÃO</h1><p class="text-lg text-white -mt-1">Análise de Estoque</p></div><button id="back-to-main-from-stock-btn" class="bg-white/20 hover:bg-white/30 text-white font-bold py-2 px-4 rounded-lg">Voltar ao Dashboard</button></div>
        </header>
        <div class="mb-6 p-4 bg-content rounded-xl shadow-sm border border-primary">
            <div id="stock-rede-filter-wrapper" class="flex flex-col sm:flex-row justify-between items-center gap-4 mb-4">
                <div class="relative w-full sm:w-1/2">
                    <label class="block mb-2 text-sm font-medium">Rede</label>
                    <div id="stock-rede-group-container" class="inline-flex rounded-md shadow-sm w-full" role="group">
                        <button type="button" data-group="" class="group-btn active py-2 px-4 text-sm font-medium border rounded-l-lg flex-1">Todos</button>
                        <button type="button" data-group="com_rede" id="stock-com-rede-btn" class="group-btn py-2 px-4 text-sm font-medium border-t border-b flex items-center justify-center gap-2 flex-1">
                            <span id="stock-com-rede-btn-text">Com Rede</span>
                            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <button type="button" data-group="sem_rede" class="group-btn py-2 px-4 text-sm font-medium border rounded-r-lg flex-1">Sem Rede</button>
                    </div>
                    <div id="stock-rede-filter-dropdown" class="hidden absolute z-20 w-full mt-1 top-full left-0 bg-modal-content border border-primary rounded-lg shadow-lg max-h-60 overflow-y-auto custom-scrollbar text-left"></div>
                </div>
                <div class="w-full sm:w-1/2">
                    <label class="block mb-2 text-sm font-medium">Pasta</label>
                    <div id="stock-fornecedor-toggle-container" class="w-full rounded-lg p-1 flex justify-center gap-2">
                        <button data-fornecedor="PEPSICO" class="fornecedor-btn font-bold py-2 px-4 rounded-lg flex-1">PEPSICO</button>
                        <button data-fornecedor="MULTIMARCAS" class="fornecedor-btn font-bold py-2 px-4 rounded-lg flex-1">MULTIMARCAS</button>
                    </div>
                </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4">
                <div><label for="stock-supervisor-filter" class="block mb-2 text-sm font-medium">Supervisor</label><select id="stock-supervisor-filter" class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5"><option value="">Todos</option></select></div>
                <div class="relative"><label class="block mb-2 text-sm font-medium">Vendedor</label><button id="stock-vendedor-filter-btn" class="w-full border text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-teal-500"><span id="stock-vendedor-filter-text">Todos</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button><div id="stock-vendedor-filter-dropdown" class="hidden absolute z-20 w-full mt-1 bg-modal-content border border-primary rounded-lg shadow-lg max-h-60 overflow-y-auto custom-scrollbar"></div></div>
                <div class="relative"><label class="block mb-2 text-sm font-medium">Fornecedor</label><button id="stock-supplier-filter-btn" class="w-full border text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-teal-500"><span id="stock-supplier-filter-text">Todos Fornecedores</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button><div id="stock-supplier-filter-dropdown" class="hidden absolute z-20 w-full mt-1 bg-modal-content border border-primary rounded-lg shadow-lg max-h-60 overflow-y-auto custom-scrollbar"></div></div>
                <div class="relative"><label for="stock-city-filter" class="block mb-2 text-sm font-medium">Cidade</label><input type="text" id="stock-city-filter" placeholder="Digite a cidade..." class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5" autocomplete="off"><div id="stock-city-suggestions" class="absolute z-10 w-full bg-modal-content border border-primary rounded-lg mt-1 hidden max-h-48 overflow-y-auto custom-scrollbar"></div></div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end">
                <div class="lg:col-span-2 relative">
                    <label class="block mb-2 text-sm font-medium">Produto</label>
                    <button id="stock-product-filter-btn" class="w-full border text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-teal-500"><span id="stock-product-filter-text">Todos os Produtos</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>
                    <div id="stock-product-filter-dropdown" class="hidden absolute z-20 w-full mt-1 bg-modal-content border border-primary rounded-lg shadow-lg">
                        <div class="p-2 border-b border-primary"><input type="text" id="stock-product-search-input" placeholder="Buscar produto..." class="bg-input text-xs rounded-lg block w-full p-2 border border-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-teal-500"></div>
                        <div id="stock-product-list" class="max-h-60 overflow-y-auto custom-scrollbar"></div>
                    </div>
                </div>
                <div><label class="block mb-2 text-sm font-medium">Filial</label><select id="stock-filial-filter" class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5"><option value="ambas" selected>Ambas</option><option value="05">Filial 05</option><option value="08">Filial 08</option></select></div>
                <button id="clear-stock-filters-btn" class="w-full font-bold py-2.5 px-4 rounded-lg">Limpar Filtros</button>
            </div>
        </div>
         <div class="p-4 rounded-xl mb-6 border border-primary shadow-sm bg-content">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-semibold">Análise de Estoque e Tendência de Saída</h2>
                <div class="flex items-end gap-4">
                    <div>
                        <label for="stock-working-days-input" class="block text-xs font-medium mb-1 text-center">Dias Úteis</label>
                        <div class="flex items-center justify-center gap-1">
                            <input type="number" id="stock-working-days-input" value="0" min="1" class="border text-sm rounded-lg block w-20 p-1.5 text-center focus:outline-none focus:ring-2 focus:ring-teal-500">
                            <span id="max-working-days-label" class="text-xs whitespace-nowrap">(Máx: 0)</span>
                        </div>
                    </div>
                    <div id="stock-trend-filter-container" class="flex items-center gap-2">
                        <button data-trend="all" class="stock-trend-btn active p-1 rounded-full transition-transform duration-200"><div class="w-5 h-5 rounded-full bg-gray-400"></div></button>
                        <button data-trend="low" class="stock-trend-btn p-1 rounded-full transition-transform duration-200"><div class="w-5 h-5 rounded-full bg-red-500"></div></button>
                        <button data-trend="medium" class="stock-trend-btn p-1 rounded-full transition-transform duration-200"><div class="w-5 h-5 rounded-full bg-yellow-500"></div></button>
                        <button data-trend="good" class="stock-trend-btn p-1 rounded-full transition-transform duration-200"><div class="w-5 h-5 rounded-full bg-green-500"></div></button>
                    </div>
                </div>
            </div>
            <div class="overflow-auto custom-scrollbar" style="max-height: 60vh;">
                <table class="min-w-full text-sm text-left">
                    <thead class="text-xs uppercase sticky-header">
                        <tr>
                            <th class="px-4 py-3">Produto</th>
                            <th class="px-4 py-3">Fornecedor</th>
                            <th class="px-4 py-3 text-right">Estoque Atual (CX.)</th>
                            <th class="px-4 py-3 text-right">Venda Média Mensal (CX.)</th>
                            <th class="px-4 py-3 text-right">Média diária (CX.)</th>
                            <th class="px-4 py-3 text-right">Tendência (Dias)</th>
                        </tr>
                    </thead>
                    <tbody id="stock-analysis-table-body" class="divide-y divide-border-secondary"></tbody>
                </table>
            </div>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div class="p-4 rounded-xl border border-primary shadow-sm bg-content">
                <h2 class="text-lg font-semibold text-center mb-4">Produtos com Crescimento</h2>
                <div class="overflow-auto custom-scrollbar" style="max-height: 40vh;">
                    <table class="min-w-full text-sm"><thead class="text-xs uppercase sticky-header"><tr><th class="px-2 py-2 text-left">Produto</th><th class="px-2 py-2 text-right">Vendido (Atual)</th><th class="px-2 py-2 text-right">Média Trim.</th><th class="px-2 py-2 text-right">Variação</th><th class="px-2 py-2 text-right">Estoque</th></tr></thead><tbody id="growth-table-body" class="divide-y divide-border-secondary"></tbody></table>
                </div>
            </div>
            <div class="p-4 rounded-xl border border-primary shadow-sm bg-content">
                <h2 class="text-lg font-semibold text-center mb-4">Produtos com Queda</h2>
                <div class="overflow-auto custom-scrollbar" style="max-height: 40vh;">
                    <table class="min-w-full text-sm"><thead class="text-xs uppercase sticky-header"><tr><th class="px-2 py-2 text-left">Produto</th><th class="px-2 py-2 text-right">Vendido (Atual)</th><th class="px-2 py-2 text-right">Média Trim.</th><th class="px-2 py-2 text-right">Variação</th><th class="px-2 py-2 text-right">Estoque</th></tr></thead><tbody id="decline-table-body" class="divide-y divide-border-secondary"></tbody></table>
                </div>
            </div>
            <div class="p-4 rounded-xl border border-primary shadow-sm bg-content">
                <h2 class="text-lg font-semibold text-center mb-4">Novos - Vendidos este Mês</h2>
                <div class="overflow-auto custom-scrollbar" style="max-height: 40vh;">
                    <table class="min-w-full text-sm"><thead class="text-xs uppercase sticky-header"><tr><th class="px-2 py-2 text-left">Produto</th><th class="px-2 py-2 text-right">Vendido (Atual)</th><th class="px-2 py-2 text-right">Média Trim.</th><th class="px-2 py-2 text-right">Estoque</th></tr></thead><tbody id="new-products-table-body" class="divide-y divide-border-secondary"></tbody></table>
                </div>
            </div>
            <div class="p-4 rounded-xl border border-primary shadow-sm bg-content">
                <h2 class="text-lg font-semibold text-center mb-4">Perdidos - Não vendidos este Mês</h2>
                <div class="overflow-auto custom-scrollbar" style="max-height: 40vh;">
                    <table class="min-w-full text-sm"><thead class="text-xs uppercase sticky-header"><tr><th class="px-2 py-2 text-left">Produto</th><th class="px-2 py-2 text-right">Vendido (Atual)</th><th class="px-2 py-2 text-right">Média Trim.</th><th class="px-2 py-2 text-right">Estoque</th></tr></thead><tbody id="lost-products-table-body" class="divide-y divide-border-secondary"></tbody></table>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 
      *********************************************************************
      * INÍCIO DA CORREÇÃO: ADICIONANDO OS ECRÃS E MODAIS EM FALTA
      *********************************************************************
    -->

    <!-- Ecrã Inovações (EM FALTA) -->
    <div id="innovations-view" class="hidden container mx-auto p-4 sm:p-6 lg:p-8">
        <header class="mb-8 p-6 header-gradient rounded-b-lg shadow-lg">
            <div class="flex justify-between items-center">
                <div><h1 class="text-2xl font-bold text-white">PAINEL DE VENDAS - <span style="color: var(--header-span-text);">PRIME</span> DISTRIBUIÇÃO</h1><p class="text-lg text-white -mt-1">Análise de Inovações</p></div>
                <div class="flex gap-4">
                    <button id="innovations-month-btn" class="bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg">Inovações Mês</button>
                    <button id="back-to-main-from-innovations-btn" class="bg-white/20 hover:bg-white/30 text-white font-bold py-2 px-4 rounded-lg">Voltar ao Dashboard</button>
                </div>
            </div>
        </header>
        <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-6 mb-6">
            <div class="kpi-card" style="--kpi-border-color: #14b8a6;">
                <h3>Clientes Ativos (Filtro)</h3>
                <p id="innovations-active-clients-kpi">0</p>
                <p class="kpi-subtext">Base para os KPIs</p>
            </div>
            <div class="kpi-card" style="--kpi-border-color: #f97316;">
                <h3>Cobertura Mês Anterior</h3>
                <p id="innovations-selection-coverage-value-kpi-previous">0%</p>
                <p id="innovations-selection-coverage-count-kpi-previous" class="kpi-subtext">0 de 0 clientes</p>
            </div>
            <div class="kpi-card" style="--kpi-border-color: #06b6d4;">
                <h3>Cobertura Mês Atual</h3>
                <p id="innovations-selection-coverage-value-kpi">0%</p>
                <p id="innovations-selection-coverage-count-kpi" class="kpi-subtext">0 de 0 clientes</p>
            </div>
            <div class="kpi-card" style="--kpi-border-color: #f97316;">
                <h3>Cobertura Bonificação Ant.</h3>
                <p id="innovations-bonus-coverage-value-kpi-previous">0%</p>
                <p id="innovations-bonus-coverage-count-kpi-previous" class="kpi-subtext">0 de 0 clientes</p>
            </div>
            <div class="kpi-card" style="--kpi-border-color: #06b6d4;">
                <h3>Cobertura Bonificação Atual</h3>
                <p id="innovations-bonus-coverage-value-kpi">0%</p>
                <p id="innovations-bonus-coverage-count-kpi" class="kpi-subtext">0 de 0 clientes</p>
            </div>
            <div class="kpi-card" style="--kpi-border-color: #8b5cf6;">
                <h3 id="innovations-top-coverage-title">Item com Maior Cobertura</h3>
                <p id="innovations-top-coverage-value-kpi">0%</p>
                <p id="innovations-top-coverage-product-kpi" class="kpi-subtext truncate" title="Nenhum item analisado">-</p>
                <p id="innovations-top-coverage-count-kpi" class="kpi-subtext">0 PDVs</p>
            </div>
        </div>
        <div class="mb-6 p-4 bg-content rounded-xl shadow-sm border border-primary">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-4">
                <div><label for="innovations-supervisor-filter" class="block mb-2 text-sm font-medium">Supervisor</label><select id="innovations-supervisor-filter" class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5"><option value="">Todos</option></select></div>
                <div class="relative"><label for="innovations-vendedor-filter-btn" class="block mb-2 text-sm font-medium">Vendedor</label><button id="innovations-vendedor-filter-btn" class="w-full border text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-teal-500"><span id="innovations-vendedor-filter-text">Todos</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button><div id="innovations-vendedor-filter-dropdown" class="hidden absolute z-20 w-full mt-1 bg-modal-content border border-primary rounded-lg shadow-lg max-h-60 overflow-y-auto custom-scrollbar"></div></div>
                <div class="relative"><label for="innovations-supplier-filter-btn" class="block mb-2 text-sm font-medium">Fornecedor</label><button id="innovations-supplier-filter-btn" class="w-full border text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-teal-500"><span id="innovations-supplier-filter-text">Todos</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button><div id="innovations-supplier-filter-dropdown" class="hidden absolute z-20 w-full mt-1 bg-modal-content border border-primary rounded-lg shadow-lg max-h-60 overflow-y-auto custom-scrollbar"></div></div>
                <div class="relative"><label for="innovations-city-filter" class="block mb-2 text-sm font-medium">Cidade</label><input type="text" id="innovations-city-filter" placeholder="Digite a cidade..." class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5" autocomplete="off"><div id="innovations-city-suggestions" class="absolute z-10 w-full bg-modal-content border border-primary rounded-lg mt-1 hidden max-h-48 overflow-y-auto custom-scrollbar"></div></div>
                <div><label for="innovations-filial-filter" class="block mb-2 text-sm font-medium">Filial</label><select id="innovations-filial-filter" class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5"><option value="ambas" selected>Ambas</option><option value="05">Filial 05</option><option value="08">Filial 08</option></select></div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end">
                <div class="lg:col-span-2 relative">
                    <label for="innovations-product-filter-btn" class="block mb-2 text-sm font-medium">Produto (Obrigatório)</label>
                    <button id="innovations-product-filter-btn" class="w-full border text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-teal-500"><span id="innovations-product-filter-text">Selecione um ou mais produtos</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>
                    <div id="innovations-product-filter-dropdown" class="hidden absolute z-20 w-full mt-1 bg-modal-content border border-primary rounded-lg shadow-lg">
                        <div class="p-2 border-b border-primary"><input type="text" id="innovations-product-search-input" placeholder="Buscar produto..." class="bg-input text-xs rounded-lg block w-full p-2 border border-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-teal-500"></div>
                        <div id="innovations-product-list" class="max-h-60 overflow-y-auto custom-scrollbar"></div>
                    </div>
                </div>
                <div class="flex items-center justify-start h-full pb-1"><div class="flex items-center"><input id="innovations-include-bonus" type="checkbox" checked class="w-4 h-4 text-teal-500 rounded focus:ring-teal-500"><label for="innovations-include-bonus" class="ml-2 text-sm font-medium">Incluir Bonificações</label></div></div>
                <button id="clear-innovations-filters-btn" class="w-full font-bold py-2.5 px-4 rounded-lg">Limpar Filtros</button>
            </div>
        </div>
        <div id="innovations-table-container" class="bg-content p-4 rounded-xl border border-primary shadow-sm">
            <div id="innovations-placeholder" class="text-center py-16"><p class="text-lg">Aguardando filtro de produtos...</p></div>
            <div id="innovations-results" class="hidden overflow-auto custom-scrollbar" style="max-height: 60vh;">
                <table class="min-w-full text-sm text-left">
                    <thead class="text-xs uppercase sticky-header">
                        <tr><th class="px-2 py-2">PRODUTO</th><th class="px-2 py-2 text-right">ESTOQUE CAIXAS</th><th class="px-2 py-2 text-right">COBERTURA MÊS ANT.</th><th class="px-2 py-2 text-right">COBERTURA MÊS ATUAL</th><th class="px-2 py-2 text-right">VARIAÇÃO</th></tr>
                    </thead>
                    <tbody id="innovations-table-body" class="divide-y divide-border-secondary"></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Ecrã Inovações Mês (EM FALTA) -->
    <div id="innovations-month-view" class="hidden container mx-auto p-4 sm:p-6 lg:p-8">
         <header class="mb-8 p-6 header-gradient rounded-b-lg shadow-lg">
            <div class="flex justify-between items-center">
                <div><h1 class="text-2xl font-bold text-white">PAINEL DE VENDAS - <span style="color: var(--header-span-text);">PRIME</span> DISTRIBUIÇÃO</h1><p class="text-lg text-white -mt-1">Gráfico de Cobertura por Categoria de Inovação</p></div>
                <div class="flex gap-4">
                    <button id="export-innovations-month-pdf-btn" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg">Exportar PDF</button>
                    <button id="back-to-innovations-from-month-btn" class="bg-white/20 hover:bg-white/30 text-white font-bold py-2 px-4 rounded-lg">Voltar</button>
                </div>
            </div>
        </header>
         <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-6 mb-6">
            <div class="kpi-card" style="--kpi-border-color: #14b8a6;"><h3>Clientes Ativos (Filtro)</h3><p id="innovations-month-active-clients-kpi">0</p><p class="kpi-subtext">Base para os KPIs</p></div>
            <div class="kpi-card" style="--kpi-border-color: #f97316;"><h3>Cobertura Mês Anterior</h3><p id="innovations-month-selection-coverage-value-kpi-previous">0%</p><p id="innovations-month-selection-coverage-count-kpi-previous" class="kpi-subtext">0 de 0 clientes</p></div>
            <div class="kpi-card" style="--kpi-border-color: #06b6d4;"><h3>Cobertura Mês Atual</h3><p id="innovations-month-selection-coverage-value-kpi">0%</p><p id="innovations-month-selection-coverage-count-kpi" class="kpi-subtext">0 de 0 clientes</p></div>
            <div class="kpi-card" style="--kpi-border-color: #f97316;"><h3>Cobertura Bonificação Ant.</h3><p id="innovations-month-bonus-coverage-value-kpi-previous">0%</p><p id="innovations-month-bonus-coverage-count-kpi-previous" class="kpi-subtext">0 de 0 clientes</p></div>
            <div class="kpi-card" style="--kpi-border-color: #06b6d4;"><h3>Cobertura Bonificação Atual</h3><p id="innovations-month-bonus-coverage-value-kpi">0%</p><p id="innovations-month-bonus-coverage-count-kpi" class="kpi-subtext">0 de 0 clientes</p></div>
            <div class="kpi-card" style="--kpi-border-color: #8b5cf6;"><h3 id="innovations-month-top-coverage-title">Item com Maior Cobertura</h3><p id="innovations-month-top-coverage-value-kpi">0%</p><p id="innovations-month-top-coverage-kpi" class="kpi-subtext truncate" title="Nenhum item analisado">-</p><p id="innovations-month-top-coverage-count-kpi" class="kpi-subtext">0 PDVs</p></div>
        </div>
        <div class="mb-6 p-4 bg-content rounded-xl shadow-sm border border-primary">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4 items-end">
                <div><label for="innovations-month-supervisor-filter" class="block mb-2 text-sm font-medium">Supervisor</label><select id="innovations-month-supervisor-filter" class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5"><option value="">Todos</option></select></div>
                <div class="relative"><label for="innovations-month-vendedor-filter-btn" class="block mb-2 text-sm font-medium">Vendedor</label><button id="innovations-month-vendedor-filter-btn" class="w-full border text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-teal-500"><span id="innovations-month-vendedor-filter-text">Todos</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button><div id="innovations-month-vendedor-filter-dropdown" class="hidden absolute z-20 w-full mt-1 bg-modal-content border border-primary rounded-lg shadow-lg max-h-60 overflow-y-auto custom-scrollbar"></div></div>
                <div class="relative"><label for="innovations-month-city-filter" class="block mb-2 text-sm font-medium">Cidade</label><input type="text" id="innovations-month-city-filter" placeholder="Digite a cidade..." class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5" autocomplete="off"><div id="innovations-month-city-suggestions" class="absolute z-10 w-full bg-modal-content border border-primary rounded-lg mt-1 hidden max-h-48 overflow-y-auto custom-scrollbar"></div></div>
                <div><label for="innovations-month-filial-filter" class="block mb-2 text-sm font-medium">Filial</label><select id="innovations-month-filial-filter" class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5"><option value="ambas" selected>Ambas</option><option value="05">Filial 05</option><option value="08">Filial 08</option></select></div>
                <div class="flex items-center justify-start h-full pb-1"><div class="flex items-center"><input id="innovations-month-include-bonus" type="checkbox" checked class="w-4 h-4 text-teal-500 rounded focus:ring-teal-500"><label for="innovations-month-include-bonus" class="ml-2 text-sm font-medium">Incluir Bonificações</label></div></div>
                <button id="clear-innovations-month-filters-btn" class="w-full font-bold py-2.5 px-4 rounded-lg">Limpar Filtros</button>
            </div>
            <div class="mt-4 border-t border-primary pt-4">
                <label for="innovations-month-category-filter" class="block mb-2 text-sm font-medium">Filtrar por Categoria de Inovação</label>
                <select id="innovations-month-category-filter" class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5"><option value="">Todas as Categorias</option></select>
            </div>
        </div>
        <div class="p-4 rounded-xl border border-primary shadow-sm bg-content mb-6">
            <div id="innovations-month-chartContainer" class="relative h-96"></div>
        </div>
        <div class="p-4 rounded-xl border border-primary shadow-sm bg-content mb-6">
            <h2 class="text-lg font-semibold mb-4 text-center">Dados do Gráfico</h2>
            <div class="overflow-auto custom-scrollbar" style="max-height: 60vh;">
                <table class="min-w-full text-sm text-left">
                    <thead class="text-xs uppercase sticky-header"><tr><th class="px-2 py-2">CATEGORIA</th><th class="px-2 py-2">PRODUTO</th><th class="px-2 py-2 text-right">ESTOQUE CAIXAS</th><th class="px-2 py-2 text-right">COBERTURA MÊS ANT.</th><th class="px-2 py-2 text-right">COBERTURA MÊS ATUAL</th><th class="px-2 py-2 text-right">VARIAÇÃO</th></tr></thead>
                    <tbody id="innovations-month-table-body" class="divide-y divide-border-secondary"></tbody>
                </table>
            </div>
        </div>
        <div class="p-4 rounded-xl border border-primary shadow-sm bg-content">
            <h2 class="text-lg font-semibold mb-2 text-center">Inovações por cliente</h2>
            <div id="innovations-by-client-legend" class="text-xs mb-4 p-2 bg-content rounded"></div>
            <div class="overflow-auto custom-scrollbar" style="max-height: 60vh;">
                <table class="min-w-full text-sm text-left">
                    <thead id="innovations-by-client-table-head" class="text-xs uppercase sticky-header"></thead>
                    <tbody id="innovations-by-client-table-body" class="divide-y divide-border-secondary"></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Ecrã Cobertura (EM FALTA) -->
    <div id="coverage-view" class="hidden container mx-auto p-4 sm:p-6 lg:p-8">
        <header class="mb-8 p-6 header-gradient rounded-b-lg shadow-lg">
            <div class="flex justify-between items-center">
                <div><h1 class="text-2xl font-bold text-white">PAINEL DE VENDAS - <span style="color: var(--header-span-text);">PRIME</span> DISTRIBUIÇÃO</h1><p class="text-lg text-white -mt-1">Análise de Cobertura (Estoque x PDVs)</p></div>
                <button id="back-to-main-from-coverage-btn" class="bg-white/20 hover:bg-white/30 text-white font-bold py-2 px-4 rounded-lg">Voltar ao Dashboard</button>
            </div>
        </header>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
            <div class="kpi-card" style="--kpi-border-color: #14b8a6;">
                <h3>Clientes Ativos (Filtro)</h3>
                <p id="coverage-active-clients-kpi">0</p>
                <p class="kpi-subtext">Base para os KPIs</p>
            </div>
            <div class="kpi-card" style="--kpi-border-color: #f97316;">
                <h3>Cobertura Mês Anterior</h3>
                <p id="coverage-selection-coverage-value-kpi-previous">0%</p>
                <p id="coverage-selection-coverage-count-kpi-previous" class="kpi-subtext">0 de 0 clientes</p>
            </div>
            <div class="kpi-card" style="--kpi-border-color: #06b6d4;">
                <h3>Cobertura Mês Atual</h3>
                <p id="coverage-selection-coverage-value-kpi">0%</p>
                <p id="coverage-selection-coverage-count-kpi" class="kpi-subtext">0 de 0 clientes</p>
            </div>
            <div class="kpi-card" style="--kpi-border-color: #8b5cf6;">
                <h3>Item com Maior Cobertura</h3>
                <p id="coverage-top-coverage-value-kpi">0%</p>
                <p id="coverage-top-coverage-product-kpi" class="kpi-subtext truncate" title="Nenhum item analisado">-</p>
            </div>
        </div>
        <div class="mb-6 p-4 bg-content rounded-xl shadow-sm border border-primary">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-4">
                <div><label for="coverage-supervisor-filter" class="block mb-2 text-sm font-medium">Supervisor</label><select id="coverage-supervisor-filter" class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5"><option value="">Todos</option></select></div>
                <div class="relative"><label for="coverage-vendedor-filter-btn" class="block mb-2 text-sm font-medium">Vendedor</label><button id="coverage-vendedor-filter-btn" class="w-full border text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-teal-500"><span id="coverage-vendedor-filter-text">Todos</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button><div id="coverage-vendedor-filter-dropdown" class="hidden absolute z-20 w-full mt-1 bg-modal-content border border-primary rounded-lg shadow-lg max-h-60 overflow-y-auto custom-scrollbar"></div></div>
                <div class="relative"><label for="coverage-supplier-filter-btn" class="block mb-2 text-sm font-medium">Fornecedor</LabeL><button id="coverage-supplier-filter-btn" class="w-full border text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-teal-500"><span id="coverage-supplier-filter-text">Todos</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button><div id="coverage-supplier-filter-dropdown" class="hidden absolute z-20 w-full mt-1 bg-modal-content border border-primary rounded-lg shadow-lg max-h-60 overflow-y-auto custom-scrollbar"></div></div>
                <div class="relative"><label for="coverage-city-filter" class="block mb-2 text-sm font-medium">Cidade</label><input type="text" id="coverage-city-filter" placeholder="Digite a cidade..." class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5" autocomplete="off"><div id="coverage-city-suggestions" class="absolute z-10 w-full bg-modal-content border border-primary rounded-lg mt-1 hidden max-h-48 overflow-y-auto custom-scrollbar"></div></div>
                <div><label for="coverage-filial-filter" class="block mb-2 text-sm font-medium">Filial</label><select id="coverage-filial-filter" class="text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5"><option value="ambas" selected>Ambas</option><option value="05">Filial 05</option><option value="08">Filial 08</option></select></div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end">
                <div class="lg:col-span-2 relative">
                    <label for="coverage-product-filter-btn" class="block mb-2 text-sm font-medium">Produto</label>
                    <button id="coverage-product-filter-btn" class="w-full border text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-teal-500"><span id="coverage-product-filter-text">Todos os Produtos</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>
                    <div id="coverage-product-filter-dropdown" class="hidden absolute z-20 w-full mt-1 bg-modal-content border border-primary rounded-lg shadow-lg">
                        <div class="p-2 border-b border-primary"><input type="text" id="coverage-product-search-input" placeholder="Buscar produto..." class="bg-input text-xs rounded-lg block w-full p-2 border border-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-teal-500"></div>
                        <div id="coverage-product-list" class="max-h-60 overflow-y-auto custom-scrollbar"></div>
                    </div>
                </div>
                <div class="flex items-center justify-start h-full pb-1"><div class="flex items-center"><input id="coverage-include-bonus" type="checkbox" checked class="w-4 h-4 text-teal-500 rounded focus:ring-teal-500"><label for="coverage-include-bonus" class="ml-2 text-sm font-medium">Incluir Bonificações</label></div></div>
                <button id="clear-coverage-filters-btn" class="w-full font-bold py-2.5 px-4 rounded-lg">Limpar Filtros</button>
            </div>
        </div>
        <div id="coverage-table-container" class="bg-content p-4 rounded-xl border border-primary shadow-sm">
            <div id="coverage-results" class="overflow-auto custom-scrollbar" style="max-height: 60vh;">
                <table class="min-w-full text-sm text-left">
                    <thead class="text-xs uppercase sticky-header">
                        <tr><th class="px-2 py-2">PRODUTO</th><th class="px-2 py-2 text-right">ESTOQUE (Cx)</th><th class="px-2 py-2 text-right">COB. ESTOQUE (Dias)</th><th class="px-2 py-2 text-right">PDVs MÊS ANT.</th><th class="px-2 py-2 text-right">PDVs MÊS ATUAL</th><th class="px-2 py-2 text-right">COB. PDVs (%)</th></tr>
                    </thead>
                    <tbody id="coverage-table-body" class="divide-y divide-border-secondary"></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Modal Detalhes do Pedido (EM FALTA) -->
    <div id="order-details-modal" class="modal-overlay hidden">
        <div class="bg-modal-content rounded-lg shadow-2xl max-w-4xl w-full m-4 border border-primary">
            <div class="p-6 border-b border-primary flex justify-between items-center"><h2 class="text-xl font-bold">Detalhes do Pedido <span id="modal-pedido-id"></span></h2><button id="modal-close-btn" class="text-3xl">&times;</button></div>
            <div id="modal-header-info" class="p-6 text-left grid grid-cols-2 md:grid-cols-3 gap-4 text-sm"></div>
            <div class="custom-scrollbar" style="max-height: 50vh; overflow-y: auto;">
                <table class="min-w-full text-sm text-left">
                    <thead class="text-xs uppercase sticky-header"><tr><th class="px-4 py-3">Produto</th><th class="px-4 py-3 text-right">Quantidade</th><th class="px-4 py-3 text-right">Peso (Kg)</th><th class="px-4 py-3 text-right">Valor Unitário</th></tr></thead>
                    <tbody id="modal-table-body" class="divide-y divide-border-secondary"></tbody>
                </table>
            </div>
            <div id="modal-footer-total" class="p-6 border-t border-primary flex justify-between items-center"></div>
        </div>
    </div>
    
    <!-- Modal Detalhes do Cliente (EM FALTA) -->
    <div id="client-details-modal" class="modal-overlay hidden">
        <div class="bg-modal-content rounded-lg shadow-2xl max-w-2xl w-full m-4 border border-primary">
            <div class="p-6 border-b border-primary flex justify-between items-center"><h2 class="text-xl font-bold">Resumo Cadastral</h2><button id="client-modal-close-btn" class="text-3xl">&times;</button></div>
            <div id="client-modal-content" class="p-6"></div>
        </div>
    </div>
    
    <!-- Modal Feriados (EM FALTA) -->
    <div id="holiday-modal" class="modal-overlay hidden">
        <div class="bg-modal-content rounded-lg shadow-2xl max-w-xs w-full m-4 border border-primary">
            <div class="p-4 border-b border-primary flex justify-between items-center">
                <h2 class="text-lg font-bold">Selecionar Feriados</h2>
                <button id="holiday-modal-close-btn" class="text-3xl">&times;</button>
            </div>
            <div class="p-4">
                <div id="calendar-container"></div>
            </div>
            <div class="p-4 border-t border-primary text-right">
                <button id="holiday-modal-done-btn" class="bg-teal-500 hover:bg-teal-400 text-white font-bold py-2 px-4 rounded-lg">Confirmar</button>
            </div>
        </div>
    </div>
    
    <!-- 
      *********************************************************************
      * FIM DA CORREÇÃO
      *********************************************************************
    -->

    <!-- Admin Uploader Modal -->
    <div id="admin-uploader-modal" class="modal-overlay hidden">
        <div class="bg-modal-content rounded-lg shadow-2xl max-w-lg w-full m-4 border border-primary relative text-center p-8">
            <button id="admin-modal-close-btn" class="absolute top-2 right-4 text-3xl font-bold hover:text-red-500 transition-colors">&times;</button>

            <h1 class="text-2xl font-bold mb-4">Uploader (v5.1 - Parcial)</h1>
            <p class="mb-6">Carregue os arquivos para enviar os dados ao Supabase. Você pode carregar um ou mais arquivos de cada vez.</p>

            <div class="space-y-4 mb-6 text-left">
                <div>
                    <label for="supabase-url" class="block text-sm font-medium mb-2">URL do Projeto Supabase</label>
                    <input type="text" id="supabase-url" placeholder="https://[seu-id].supabase.co" class="w-full text-sm p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 bg-input border-primary text-primary" value="https://dhozwhfmrwiumwpcqabi.supabase.co">
                </div>
                <div class="relative">
                    <label for="supabase-key" class="block text-sm font-medium mb-2">Chave Secreta (service_role) 🤫</label>
                    <input type="password" id="supabase-key" placeholder="Cole sua chave secreta aqui..." class="w-full text-sm p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 bg-input border-primary text-primary pr-10">
                    <button type="button" id="toggle-supabase-key" class="absolute inset-y-0 right-0 top-7 flex items-center px-3 text-gray-500 hover:text-gray-700">
                        <svg id="eye-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                        </svg>
                        <svg id="eye-off-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7 1.274-4.057 5.064-7 9.542-7 .847 0 1.673.126 2.463.362m3.69-3.69a14.92 14.92 0 015.385 5.325c-1.274 4.057-5.064 7-9.542 7a10.024 10.024 0 01-3.32-.518m-3.69-3.69A14.92 14.92 0 002.458 12c1.274-4.057 5.064-7 9.542-7 .847 0 1.673.126 2.463.362m0 0l-1.04 1.04m-3.628 3.628L12 13.5m0 0a3 3 0 100-6 3 3 0 000 6z" />
                        </svg>
                    </button>
                    <p class="text-xs mt-1">Esta chave NUNCA é salva. Você deve digitá-la toda vez que for usar.</p>
                </div>
            </div>

            <div class="space-y-4 mb-6 border-t border-primary pt-6 text-left">
                <div>
                    <label for="sales-file-input" class="block text-sm font-medium mb-2">1. Arquivo de Vendas (Mês Atual)</label>
                    <input type="file" id="sales-file-input" class="block w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-button file:text-secondary hover:file:bg-button-hover" accept=".csv, .xls, .xlsx"/>
                </div>
                <div>
                    <label for="clients-file-input" class="block text-sm font-medium mb-2">2. Cadastro de Clientes</label>
                    <input type="file" id="clients-file-input" class="block w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-button file:text-secondary hover:file:bg-button-hover" accept=".csv, .xls, .xlsx"/>
                </div>
                <div>
                    <label for="products-file-input" class="block text-sm font-medium mb-2">3. Cadastro de Produtos</label>
                    <input type="file" id="products-file-input" class="block w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-button file:text-secondary hover:file:bg-button-hover" accept=".csv, .xls, .xlsx"/>
                </div>
                <div>
                    <label for="history-file-input" class="block text-sm font-medium mb-2">4. Histórico de Vendas (Trimestre Anterior)</label>
                    <input type="file" id="history-file-input" class="block w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-button file:text-secondary hover:file:bg-button-hover" accept=".csv, .xls, .xlsx"/>
                </div>
                 <div>
                    <label for="innovations-file-input" class="block text-sm font-medium mb-2">5. Planilha de Inovações (Mês)</label>
                    <input type="file" id="innovations-file-input" class="block w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-button file:text-secondary hover:file:bg-button-hover" accept=".csv, .xls, .xlsx"/>
                </div>
            </div>

            <button id="generate-btn" class="bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-4 rounded-lg w-full disabled:bg-slate-500 disabled:hover:bg-slate-500 disabled:cursor-not-allowed">
                Enviar Dados para o Supabase
            </button>

            <div id="status-container" class="hidden mt-6 text-sm h-12 flex flex-col justify-center">
                <p id="status-text" class="mb-2"></p>
                <div class="w-full h-2 rounded-lg overflow-hidden bg-slate-700">
                    <div id="progress-bar" class="bg-teal-500 h-full transition-all duration-300"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- Carrega a biblioteca do Supabase primeiro -->

    <script src="js/api.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/theme.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/main.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/uploader.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
